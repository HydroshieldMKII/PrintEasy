<div>
    <p-tabs [value]="tab">
        <p-tablist>
            <p-tab [value]="'commands'" (click)="openCommands()">Commands</p-tab>
            <p-tab [value]="'contracts'" (click)="openContracts()">Contracts</p-tab>
        </p-tablist>
        <p-tabpanels>
            <p-tabpanel [value]="'commands'">
                <p-table *ngIf="myOrders.length > 0" [value]="myOrders" [tableStyle]="{'width': '100%'}">
                    <ng-template #header>
                        <tr>
                            <th>
                                Name
                            </th>
                            <th>
                                <div class="right-cell">
                                    Price
                                </div>
                            </th>
                            <th>
                                <div class="center-cell">
                                    Status
                                </div>
                            </th>
                            <th>
                                Target Date
                            </th>
                            <th>
                                Printer
                            </th>
                            <th>
                                Rating
                            </th>
                            <th>
                                Actions
                            </th>
                        </tr>
                    </ng-template>
                    <ng-template #body let-order>
                        <tr>
                            <td>{{order.offer.request.name}}</td>
                            <td>
                                <div class="right-cell">
                                    {{order.offer.price | currency}}
                                </div>
                            </td>
                            <td>
                                <div class="center-cell">
                                    <span class="status-tag" [ngStyle]="{'background-color': statusColorRef[order.orderStatus.at(-1).statusName || 0]}">
                                        <p class="w-full">{{order.orderStatus.at(-1).statusName}}</p>
                                    </span>
                                </div>
                            </td>
                            <td>{{order.offer.targetDate | date:'fullDate'}}</td>
                            <td>
                                <div class="h-td-table">
                                    <p-avatar label="" size="large" shape="circle" *ngIf="order.offer.printerUser.user.profilePictureUrl" image="{{order.offer.printerUser.user.profilePictureUrl}}"></p-avatar>
                                    <p>{{order.offer.printerUser.user.username}}</p>
                                </div>
                                
                            </td>
                            <td>
                                <div *ngIf="order.review" class="h-td-table">
                                    <p>{{order.review?.rating}}</p>
                                    <i class="pi pi-star-fill"></i>
                                </div>
                                <p *ngIf="!order.review">No Review</p>
                            </td>
                            <td>
                                <p-button
                                    icon="pi pi-arrow-right"
                                    title="See Details"
                                    routerLink="/orders/view/{{ order.id }}"
                                ></p-button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
                <div
                    *ngIf="myOrders.length == 0"
                    class="empty-message"
                    style="width: 100%; height: 100%;"
                    >
                    <i class="pi pi-inbox text-6xl text-gray-400"></i>
                    <p class="text-xl font-semibold text-gray-500 mt-2">
                        You dont have any orders pending!
                    </p>
                </div>
            </p-tabpanel>
            <p-tabpanel [value]="'contracts'">
                <p-table *ngIf="makeOrders.length > 0" [value]="makeOrders" [tableStyle]="{'width': '100%'}">
                    <ng-template #header>
                        <tr>
                            <th>
                                Name
                            </th>
                            <th>
                                <div class="right-cell">
                                    Price
                                </div>
                            </th>
                            <th class="center-cell">
                                Status
                            </th>
                            <th>
                                Target Date
                            </th>
                            <th>
                                Consumer
                            </th>
                            <th>
                                Rating
                            </th>
                            <th>
                                Actions
                            </th>
                        </tr>
                    </ng-template>
                    <ng-template #body let-order>
                        <tr>
                            <td>{{order.offer.request.name}}</td>
                            <td>
                                <div class="right-cell">
                                    {{order.offer.price | currency}}
                                </div>
                            </td>
                            <td>
                                <div class="center-cell">
                                    <span class="status-tag" [ngStyle]="{'background-color': statusColorRef[order.orderStatus.at(-1).statusName || 0]}">
                                        <p class="w-full">{{order.orderStatus.at(-1).statusName}}</p>
                                    </span>
                                </div>
                            </td>
                            <td>{{order.offer.targetDate | date:'fullDate'}}</td>
                            <td>
                                <div class="h-td-table">
                                    <p-avatar label="" size="large" shape="circle" *ngIf="order.offer.request.user.profilePictureUrl" image="{{order.offer.request.user.profilePictureUrl}}"></p-avatar>
                                    <p>{{order.offer.request.user.username}}</p>
                                </div>
                                
                            </td>
                            <td>
                                <div *ngIf="order.review" class="h-td-table">
                                    <p>{{order.review?.rating}}</p>
                                    <i class="pi pi-star-fill"></i>
                                </div>
                                <p *ngIf="!order.review">No Review</p>
                            </td>
                            <td>
                                <p-button
                                    icon="pi pi-arrow-right"
                                    title="See Details"
                                    routerLink="/orders/view/{{ order.id }}"
                                ></p-button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
                <div
                    *ngIf="makeOrders.length == 0"
                    class="empty-message"
                    style="width: 100%; height: 100%;"
                    >
                    <i class="pi pi-inbox text-6xl text-gray-400"></i>
                    <p class="text-xl font-semibold text-gray-500 mt-2">
                        You dont have any contracts yet!
                    </p>
                </div>
            </p-tabpanel>
        </p-tabpanels>
    </p-tabs>
</div>

