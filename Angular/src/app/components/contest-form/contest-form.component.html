<div class="contest-container">
  <p-card header="Créer un contest" class="form-card">
    <form [formGroup]="contestForm" (ngSubmit)="onSubmit()">
      <div class="p-fluid grid">
        <!-- Thème -->
        <div class="field col-12">
          <p-floatlabel variant="on">
            <input id="theme" pInputText formControlName="theme" type="text" />
            <label for="theme" class="p-text-bold">Thème</label>
          </p-floatlabel>
          <small *ngIf="contestForm.get('theme')?.invalid && contestForm.get('theme')?.touched" class="p-error">
            Le thème est requis.
          </small>
        </div>

        <!-- Description -->
        <div class="field col-12">
          <p-floatlabel variant="on">
            <textarea class="description-textarea" id="description" pTextarea formControlName="description" rows="4"></textarea>
            <label for="description" class="p-text-bold">Description</label>
          </p-floatlabel>
          <small *ngIf="contestForm.get('description')?.invalid && contestForm.get('description')?.touched"
            class="p-error">
            La description est requise.
          </small>
        </div>

        <!-- Limite -->
        <div class="field col-12 md:col-6">
          <p-floatlabel variant="on">
            <input id="limit" pInputText formControlName="limit" type="number" />
            <label for="limit" class="p-text-bold">Limite</label>
          </p-floatlabel>
          <small *ngIf="contestForm.get('limit')?.invalid && contestForm.get('limit')?.touched" class="p-error">
            La limite doit être un nombre supérieur à 0.
          </small>
        </div>

        <!-- Date de début -->
        <div class="field col-12 md:col-6">
          <p-floatlabel variant="on">
            <p-datepicker inputId="startDate" showIcon iconDisplay="input" [showButtonBar]="true"
              formControlName="startDate" />
            <label for="startDate">Date de début</label>
          </p-floatlabel>
          <small *ngIf="contestForm.get('startDate')?.invalid && contestForm.get('startDate')?.touched" class="p-error">
            La date de début est requise.
          </small>
        </div>

        <!-- Date de fin -->
        <div class="field col-12 md:col-6">
          <p-floatlabel variant="on">
            <p-datepicker inputId="endDate" showIcon iconDisplay="input" [showButtonBar]="true"
              formControlName="endDate" />
            <label for="endDate">Date de fin</label>
          </p-floatlabel>
          <small *ngIf="contestForm.get('endDate')?.invalid && contestForm.get('endDate')?.touched" class="p-error">
            La date de fin est requise.
          </small>
        </div>

        <!-- Upload de l'image -->
        <div class="field col-12">
          <label for="image" class="p-text-bold">Image</label>
          <p-fileUpload name="image" accept="image/*" [maxFileSize]="1000000" [auto]="true"
            (onSelect)="onFileSelect($event)"></p-fileUpload>
          <small *ngIf="contestForm.get('image')?.invalid && contestForm.get('image')?.touched" class="p-error">
            Une image est requise.
          </small>
        </div>

        <!-- Boutons -->
        <div class="field col-12">
          <div class="button-container">
            <button pButton label="Annuler" type="button" (click)="onCancel()" class="p-button-secondary"></button>
            <button pButton label="Soumettre" type="submit" [disabled]="!contestForm.valid"
              class="p-button-success p-mr-2"></button>
          </div>
        </div>
      </div>
    </form>
  </p-card>
</div>